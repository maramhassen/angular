<h1 class="text-center my-4">Liste des RÃ©sidences</h1>

<!-- ğŸ“… Affichage de la date -->
<p class="text-center">ğŸ“… Date actuelle : {{ date | date:'dd/MM/yyyy' }}</p>

<!-- ğŸ” Champ de recherche -->
<div class="mb-3 text-center">
  <input type="text" class="form-control w-50 mx-auto" 
         placeholder="Rechercher par adresse..." 
         [(ngModel)]="searchText" (input)="updateFilteredResidences()">
  <p>RÃ©sidences correspondant Ã  "<strong>{{ searchText }}</strong>"</p>
</div>

<!-- ğŸ“‹ Liste des rÃ©sidences -->
<div class="d-flex flex-wrap justify-content-center">
  <div *ngIf="filteredResidences.length > 0; else noResults">
    <div class="card m-3 shadow" *ngFor="let res of filteredResidences" style="width: 18rem;">
      <img [src]="res.image" class="card-img-top" alt="{{ res.name }}">
      <div class="card-body text-center">
        <h3 class="card-title">{{ res.name | uppercase }}</h3>
        
        <!-- âœ… Affichage du statut -->
        <h3 [ngStyle]="{'color': getStatusColor(res.status)}">
          {{ res.status | lowercase }} {{ getStatusIcon(res.status) }}
        </h3>

        <!-- ğŸ” DÃ©tails -->
        <button class="btn btn-secondary btn-sm m-1" [routerLink]="['/residences', res.id]">ğŸ” DÃ©tails</button>

        <!-- ğŸ˜ï¸ Voir les appartements -->
        <button class="btn btn-info btn-sm m-1" [routerLink]="['/residences', res.id, 'apartments']">
          ğŸ˜ï¸ Appartements List
        </button>

        <!-- â¤ï¸ Ajouter aux favoris -->
        <button class="btn btn-danger btn-sm m-1" (click)="addToFavorite(res)">â¤ï¸ Like</button>
      </div>
    </div>
  </div>
</div>

<!-- ğŸ›‘ Message si aucune rÃ©sidence trouvÃ©e -->
<ng-template #noResults>
  <p class="text-center text-muted">âš ï¸ Aucune rÃ©sidence ne correspond Ã  votre recherche.</p>
</ng-template>

<!-- ğŸ† Liste des favoris -->
<div class="mt-4">
  <h2 class="text-center">ğŸ† RÃ©sidences Favorites</h2>

  <div *ngIf="favoriteResidences.length > 0; else noFavorites">
    <ul class="list-group w-50 mx-auto">
      <li class="list-group-item d-flex justify-content-between align-items-center" 
          *ngFor="let res of favoriteResidences">
        {{ res.name }}
        <span (click)="removeFromFavorites(res)" style="cursor: pointer; color: red;">âŒ</span>
      </li>
    </ul>
  </div>
</div>

<!-- ğŸš« Message si aucun favori ajoutÃ© -->
<ng-template #noFavorites>
  <p class="text-center text-muted">âš ï¸ Aucun favori ajoutÃ©.</p>
</ng-template>
